<html lang="en">
  <head>
	<meta http-equiv="refresh" content="60">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Static -->
    <!--link href="report/bootstrap.min.css" %}" rel="stylesheet"-->

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

  </head>
  <body>
    <div id="charts">
      <div class="col-sm-12">
        <div class="panel panel-default">
          <div class="panel-body">
            <canvas id="canvas" width="400" height="200"></canvas>
          </div>
        </div>
      </div>
    </div>

    <script src="js/jquery.min.js"></script>
    <script src="js/Chart.bundle.min.js"></script>
    <script src="js/Chart.min.js"></script>
    <script>
        // Example
        // var data = {'datasets': [{'label': 'usados', 'data': [680, 857, 1452, 3870, 3068, 3021, 867, 439, 1, 70, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], 'backgroundColor': 'rgba(0,255,0,0.7)', 'hoverBackgroundColor': 'rgba(0,255,0,1)'}, {'label': 'pendientes', 'data': [11, 21847, 32, 28131, 45, 19180, 76, 4507, 642, 21931, 464, 4055, 1695, 22001, 569, 621, 1258, 3890, 358, 22001, 385, 570], 'backgroundColor': 'rgba(255,0,0,0.7)', 'hoverBackgroundColor': 'rgba(255,0,0,1)'}], 'labels': ['recinto martes tickets', 'recinto martes inv', 'recinto miercoles tickets', 'recinto miercoles inv', 'recinto jueves tickets', 'recinto jueves inv', 'espectaculo jueves tickets', 'espectaculo jueves inv', 'recinto viernes tickets', 'recinto viernes inv', 'espectaculo viernes tickets', 'espectaculo viernes inv', 'recinto sabado tickets', 'recinto sabado inv', 'espectaculo sabado-manana tickets', 'espectaculo sabado-manana inv', 'espectaculo sabado-tarde tickets', 'espectaculo sabado-tarde inv', 'recinto domingo tickets', 'recinto domingo inv', 'espectaculo domingo tickets', 'espectaculo domingo inv']};
        var data = {{data|safe}};
        var canvas = $('#canvas');
        var ctx = canvas.get(0).getContext("2d");
        chart = new Chart(ctx, {
            type: 'horizontalBar',
            data: data,
            options: {
                scales: {
                    xAxes: [{stacked: true}],
                    yAxes: [{stacked: true}]
                },
                animation: {
                    duration: 1,
                    onComplete: function() {
							// render the value of the chart above the bar
							var ctx = this.chart.ctx;
							ctx.font = Chart.helpers.fontString(Chart.defaults.global.defaultFontSize, 'normal', Chart.defaults.global.defaultFontFamily);
							ctx.fillStyle = this.chart.config.options.defaultFontColor;
							ctx.textAlign = 'center';
							ctx.textBaseline = 'bottom';
							this.data.datasets.forEach(function (dataset) {
								for (var i = 0; i < dataset.data.length; i++) {
									var model = dataset._meta[Object.keys(dataset._meta)[0]].data[i]._model;
									var posy = model.y;
									if (model.datasetLabel == 'pendientes') {
										posy += 12;
									}
									ctx.fillText(dataset.data[i], model.x + 15, posy);
								}
							});
                    }
                }
            }
        });
    </script>
  </body>
</html>
