{% load i18n %}

<table class="table table-striped table-bordered" role="table">
    <tr>
        <th class="bg-info" colspan="2">{% trans "Ticket info" %}</th>
    </tr>
    <tr>
        <th>{% trans "Event" %}</th>
        <td>{{ ticket.event }}</td>
    </tr>
    <tr>
        <th>{% trans "Ticket number" %}</th>
        <td>{{ ticket.order }}</td>
    </tr>
    <tr>
        <th>{% trans "Payment number" %}</th>
        <td>{{ ticket.order_tpv }}</td>
    </tr>
    <tr>
        <th>{% trans "Ticket price" %}</th>
        <td>{{ ticket.get_price|floatformat:2 }} â‚¬</td>
    </tr>
    <tr>
        <th>{% trans "Ticket confirmed" %}</th>
        <td>{{ ticket.confirmed|yesno }}</td>
    </tr>

    {% if ticket.confirmed %}
    <tr>
        <td colspan="2">
            <form id="download-{{ ticket.order }}" method="post" action="{% url 'thanks' ticket.order %}">
                {% csrf_token %}
                <input type="hidden" name="ticket" value="{{ ticket.order }}"/>
                <button class="btn btn-lg btn-block btn-warning">
                    <span class="glyphicon glyphicon-download" aria-hidden="true"></span>
                    {% trans "DOWNLOAD ALL TICKETS" %}
                </button>
            </form>
        </td>
    </tr>
    {% endif %}

    <tr>
        <th class="bg-info" colspan="2">{% trans "Personal info" %}</th>
    </tr>
    <tr>
        <th>{% trans "Email" %}</th>
        <td>{{ ticket.email }}</td>
    </tr>
    <!-- todo add custom fields -->
    {% for d in ticket.get_extras %}
    <tr>
        <th>{{ d.field.label }}</th>
        {% if d.field.type == 'check' %}
            <td>{{ d.value|yesno }}</td>
        {% else %}
            <td>{{ d.value }}</td>
        {% endif %}
    </tr>
    {% endfor %}
</table>

<h2>{% trans "Tickets" %}</h2>
{% if ticket.is_mp %}
    {% for t in ticket.all_tickets %}
        {% include "tickets/ticket-detail.html" with ticket=t %}
    {% endfor %}
{% else %}
    {% include "tickets/ticket-detail.html" %}
{% endif %}
